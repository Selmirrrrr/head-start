@page "/tenants"
@using HeadStart.Client.Generated
@using HeadStart.Client.Generated.Models

<BlazePage Title="Tenants" Breadcrumbs="@_breadCrumbs">
        <MudCard>
            <MudCardHeader>
                    Tenants
            </MudCardHeader>
            <MudCardContent>
                <MudGrid>
                    @foreach (var tenant in _tenants)
                    {
                        <MudItem xs="12" sm="12" md="4">
                            <MudPaper Elevation="0"
                                    Class="pa-4 rounded-lg h-[200px]">
                                @tenant.Name
                            </MudPaper>
                        </MudItem>
                    }
                </MudGrid>
            </MudCardContent>
            <MudCardActions>
                <MudButton>
                    Add Tenant
                </MudButton>
            </MudCardActions>
        </MudCard>
</BlazePage>

@inject HttpClient HttpClient
@inject IDialogService DialogService
@inject ISnackbar Snackbar

@code {

    [Inject]
    public required ApiClientV1 ApiClient { get; set; }
    private readonly BreadcrumbItem[] _breadCrumbs =
    [
        new BreadcrumbItem("Dashboard", "/"),
        new BreadcrumbItem("Tenants", "/tenants")
    ];

    protected override async Task OnInitializedAsync()
    {
        _tenants = (await ApiClient.Api.V1.Tenants.GetAsync())?.Tenants ?? _tenants;
        await InvokeAsync(StateHasChanged);
    }

    private IEnumerable<HeadStartWebAPIFeaturesTenantsTenantsGetList_TenantViewModel> _tenants = [];

}
